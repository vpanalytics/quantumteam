<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quantum Minds - Plataforma Completa</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Exo+2:wght@300;400;500;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <style>
        /* ============================================= */
        /* == RESET E CONFIGURAÇÕES GLOBAIS           == */
        /* ============================================= */
        :root {
            --background-light: #FFFFFF;
            --background-panel: #F9FAFB;
            --gold-primary: #c5a773;
            --gold-secondary: #f7f4ef;
            --gold-glow: rgba(197, 167, 115, 0.5 );
            --text-dark: #333333;
            --text-secondary: #6B7280;
            --border-color: #E5E7EB;
            --font-title: 'Orbitron', sans-serif;
            --font-body: 'Exo 2', sans-serif;
            --font-chat: 'Inter', sans-serif;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: var(--font-body);
            background-color: var(--background-light);
            color: var(--text-dark);
            overflow: hidden;
        }

        /* ============================================= */
        /* == TELA 1: PÁGINA DE LOGIN                 == */
        /* ============================================= */
        #login-section { 
            display: flex; 
            width: 100vw; 
            height: 100vh;
            justify-content: center;
            background-color: var(--background-light);
        }
        .left-panel, .right-panel { height: 100%; display: flex; justify-content: center; align-items: center; padding: 2rem; }
        .static-formation { position: relative; width: 600px; height: 600px; display: flex; justify-content: center; align-items: center; }
        .agent-container { position: absolute; display: flex; flex-direction: column; align-items: center; }
        
        .agent-avatar {
            width: 140px;
            height: auto;
            display: block;
        }
        .central-agent .agent-avatar {
            width: 190px;
        }

        .agent-info { margin-top: 0.75rem; text-align: center; }
        .agent-name { font-size: 0.9rem; font-weight: 500; color: var(--text-dark); }
        .agent-title { font-size: 0.75rem; font-weight: 300; color: var(--text-secondary); }
        
        .login-box {
            width: 100%;
            max-width: 450px;
            position: relative;
            background: #000000;
            background-image: radial-gradient(circle at center, rgba(197, 167, 115, 0.15) 0%, transparent 60%);
            border-radius: 20px;
            padding: 2.5rem 3.5rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            text-align: center;
            border: 1px solid rgba(197, 167, 115, 0.2);
        }

        .login-shield-logo {
            width: 80px;
            height: auto;
            margin-bottom: 1rem;
        }
        .login-title-logo {
            width: 80%;
            max-width: 300px;
            height: auto;
            margin-bottom: 2.5rem;
        }
        .input-group { margin-bottom: 1.5rem; text-align: left; }
        .input-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 300;
            color: rgba(255, 255, 255, 0.7);
        }
        .input-group input {
            width: 100%;
            padding: 1rem;
            background-color: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(197, 167, 115, 0.3);
            border-radius: 5px;
            color: white;
            font-size: 1rem;
        }
        .input-group input::placeholder { color: rgba(255, 255, 255, 0.5); }
        .btn-login {
            width: 100%;
            padding: 1rem;
            margin-top: 1rem;
            background-color: var(--gold-primary);
            color: black;
            border: none;
            border-radius: 5px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .btn-login:hover { background-color: #dfc395; }

        #login-web-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }

        /* ============================================= */
        /* == ESTRUTURA PRINCIPAL PÓS-LOGIN (APP SHELL) == */
        /* ============================================= */
        #app-shell { 
            display: none; 
            width: 100vw; 
            height: 100vh; 
            display: flex; 
            background-color: var(--background-light);
        }

        .app-sidebar {
            width: 280px;
            height: 100%;
            background: #000000;
            background-image: radial-gradient(circle at top, rgba(197, 167, 115, 0.15) 0%, transparent 70%);
            border-right: 1px solid rgba(197, 167, 115, 0.2);
            padding: 2rem 1.5rem;
            display: flex;
            flex-direction: column;
            flex-shrink: 0;
        }

        .app-sidebar-header {
            text-align: center;
            margin-bottom: 3rem;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .sidebar-shield-logo {
            width: 60px;
            height: auto;
            margin-bottom: 1rem;
        }
        .sidebar-title-logo {
            width: 70%;
            max-width: 200px;
            height: auto;
        }

        .app-nav { display: flex; flex-direction: column; gap: 0.5rem; }
        
        .app-nav-link {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 0.8rem 1rem;
            border-radius: 8px;
            text-decoration: none;
            color: rgba(255, 255, 255, 0.8);
            font-weight: 500;
            transition: background-color 0.2s ease, color 0.2s ease;
        }
        .app-nav-link:hover {
            background-color: rgba(197, 167, 115, 0.1);
            color: white;
        }
        .app-nav-link.active {
            background-color: var(--gold-primary);
            color: black;
        }
        .app-nav-link svg {
            width: 20px;
            height: 20px;
            stroke: currentColor;
        }

        .app-sidebar-footer {
            margin-top: auto;
            padding-top: 1rem;
            border-top: 1px solid rgba(197, 167, 115, 0.2);
        }
        #logout-btn:hover { background-color: #d9534f; color: white; }

        .app-main-content { flex-grow: 1; height: 100%; overflow-y: auto; position: relative; }
        .app-main-content > section { display: none; width: 100%; height: 100%; flex-direction: column; }

        /* ============================================= */
        /* == TELA "NOSSOS AGENTES" (CARROSSEL)       == */
        /* ============================================= */
        #agents-info-section { padding: 2rem 3rem; justify-content: flex-start; align-items: flex-start; }
        .carousel-header { text-align: left; margin-bottom: 2rem; }
        .carousel-header h1 { font-family: var(--font-title); font-size: 3rem; color: var(--gold-primary); }
        .carousel-header p { font-size: 1.2rem; color: var(--text-secondary); }
        .carousel-content { display: flex; gap: 3rem; width: 100%; align-items: center; }
        .carousel-image-container { flex-basis: 45%; flex-shrink: 0; }
        
        .carousel-image-container img {
            width: 100%;
            max-width: 450px;
            height: auto;
            display: block;
            margin: 0 auto;
        }

        .carousel-text-container { flex-basis: 55%; }
        .carousel-text-container h2 { font-size: 2.5rem; font-weight: bold; margin-bottom: 0.5rem; }
        .carousel-text-container h3 { font-size: 1.2rem; font-weight: 500; color: var(--gold-primary); margin-bottom: 2rem; }
        .carousel-description p { margin-bottom: 1rem; line-height: 1.6; color: var(--text-secondary); }
        .carousel-description strong { color: var(--text-dark); }
        .carousel-controls { display: flex; align-items: center; gap: 1.5rem; margin-top: 2rem; }
        .carousel-arrow { width: 50px; height: 50px; border-radius: 50%; background-color: var(--gold-primary); color: white; border: none; cursor: pointer; font-size: 1.5rem; display: flex; justify-content: center; align-items: center; }
        .carousel-counter { font-size: 1.2rem; font-weight: 500; color: var(--text-dark); }

        /* ============================================= */
        /* == TELA "CHATS" (TEIA DE AGENTES)          == */
        /* ============================================= */
        #chat-platform-section { padding: 2rem 3rem; justify-content: center; align-items: center; }
        .chat-agent-web-container { display: flex; flex-direction: column; align-items: center; width: 100%; }
        
        .chat-static-formation { position: relative; width: 600px; height: 600px; display: flex; justify-content: center; align-items: center; }
        .chat-static-formation .agent-container { cursor: pointer; transition: transform 0.3s ease; z-index: 10; position: absolute; display: flex; flex-direction: column; align-items: center; }
        
        .chat-web-logo {
            position: absolute;
            width: 250px;
            height: auto;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            z-index: 5;
        }

        #chat-web-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }

        .chat-static-formation .agent-info {
            opacity: 0;
            transition: opacity 0.3s ease;
            position: absolute;
            bottom: -40px;
            left: 50%;
            transform: translateX(-50%);
            background-color: black;
            padding: 5px 10px;
            border-radius: 5px;
            white-space: nowrap;
            text-align: center;
        }
        .chat-static-formation .agent-container:hover .agent-info {
            opacity: 1;
        }
        .chat-static-formation .agent-info .agent-name {
            color: var(--gold-primary);
            font-weight: bold;
        }
        .chat-static-formation .agent-info .agent-title {
            color: white;
            font-size: 0.8rem;
        }

        .chat-static-formation .agent-container:hover {
            transform: scale(1.1);
            z-index: 20;
        }

        .chat-conversation-container { display: none; width: 100%; height: 100%; }
        .chat-conversation-container .chat-area-panel { flex-grow: 1; display: flex; flex-direction: column; background-color: var(--background-light); height: 100%; }
        .chat-conversation-container .chat-area-header { padding: 20px 24px; border-bottom: 1px solid var(--border-color); font-size: 1.2rem; font-weight: 600; background-color: var(--background-panel); display: flex; align-items: center; }
        .chat-conversation-container .chat-history { flex-grow: 1; padding: 24px; overflow-y: auto; display: flex; flex-direction: column; gap: 20px; }
        .chat-conversation-container .message-group { display: flex; gap: 16px; max-width: 75%; }
        .chat-conversation-container .message-group.user { align-self: flex-end; flex-direction: row-reverse; }
        .chat-conversation-container .message-group.agent { align-self: flex-start; }
        
        .chat-conversation-container .message-avatar {
            width: 40px;
            height: auto;
            align-self: flex-end;
        }

        .chat-conversation-container .message-content { display: flex; flex-direction: column; gap: 6px; }
        .chat-conversation-container .message-bubble { padding: 12px 16px; border-radius: 18px; font-size: 0.95rem; line-height: 1.5; }
        .chat-conversation-container .user .message-bubble { background-color: var(--gold-primary); color: white; border-bottom-right-radius: 4px; }
        .chat-conversation-container .agent .message-bubble { background-color: var(--background-panel); border: 1px solid var(--border-color); border-bottom-left-radius: 4px; }
        .chat-conversation-container .chat-input-area { padding: 16px 24px; border-top: 1px solid var(--border-color); display: flex; align-items: center; gap: 16px; background-color: var(--background-panel); }
        .chat-conversation-container #chat-input-web { flex-grow: 1; border: 1px solid var(--border-color); background-color: var(--background-light); border-radius: 8px; padding: 12px 16px; font-size: 1rem; }
        .chat-conversation-container #send-button-web { width: 48px; height: 48px; border-radius: 8px; border: none; background-color: var(--gold-primary); color: white; display: flex; justify-content: center; align-items: center; cursor: pointer; }
        .back-button-web { display: flex; align-items: center; gap: 0.5rem; background: none; border: 1px solid var(--border-color); padding: 0.5rem 1rem; border-radius: 8px; cursor: pointer; font-size: 1rem; color: var(--text-dark); margin-right: 1.5rem; }
        .back-button-web:hover { background-color: var(--background-panel); }
        #chat-header-title-web { font-size: 1.2rem; font-weight: 600; }
        
        .typing-indicator span {
            height: 8px;
            width: 8px;
            background-color: #9E9EA1;
            border-radius: 50%;
            display: inline-block;
            animation: wave 1.3s infinite;
        }
        .typing-indicator span:nth-of-type(2) { animation-delay: 0.2s; }
        .typing-indicator span:nth-of-type(3) { animation-delay: 0.4s; }
        @keyframes wave {
            0%, 60%, 100% { transform: initial; }
            30% { transform: translateY(-8px); }
        }

        /* ======================================================= */
        /* == REGRAS PARA LAYOUT MOBILE                       == */
        /* ======================================================= */
        .mobile-header { display: none; }

        @media (max-width: 768px) {
            body { overflow: auto; }
            #login-section { flex-direction: column; height: auto; min-height: 100vh; justify-content: flex-start; }
            .left-panel { width: 100%; height: auto; padding: 4rem 1rem 2rem 1rem; }
            .right-panel { width: 100%; height: auto; padding: 1rem; }
            .static-formation { width: 320px; height: 320px; margin: 0 auto; }
            
            .agent-avatar { width: 60px; }
            .central-agent .agent-avatar { width: 75px; }

            .login-box { width: 100%; max-width: none; padding: 2rem 1rem; box-shadow: none; border-radius: 0; }
            .app-main-content { width: 100%; }
            #agents-info-section { padding: 1.5rem 1rem; }
            .carousel-header h1 { font-size: 2rem; }
            
            .mobile-header { display: flex; justify-content: space-between; align-items: center; padding: 1rem; background-color: var(--gold-secondary); border-bottom: 1px solid var(--border-color); width: 100%; }
            .mobile-header-title { font-family: var(--font-title); font-size: 1.5rem; color: var(--gold-primary); }
            .mobile-menu-button { background: none; border: none; cursor: pointer; padding: 0.5rem; display: none; }
            .mobile-menu-button svg { width: 24px; height: 24px; color: var(--text-dark); }
            
            .app-sidebar { position: fixed; top: 0; left: -100%; width: 280px; height: 100%; z-index: 200; transition: left 0.3s ease-in-out; }
            .app-sidebar.mobile-visible { left: 0; }
            .overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.5); z-index: 199; display: none; }
            .overlay.visible { display: block; }
            
            #chat-platform-section { padding: 0; }
            .chat-conversation-container .chat-area-panel { position: absolute; top: 0; left: 100%; width: 100%; height: 100%; transition: left 0.3s ease-in-out; z-index: 100; }
            .chat-conversation-container.mobile-active { left: 0; }
            .chat-conversation-container .chat-area-header { display: flex; align-items: center; }
            .back-button-web { display: flex !important; }
            
            .carousel-content { flex-direction: column; gap: 0; }
            .carousel-image-container, .carousel-text-container { flex-basis: 100%; width: 100%; }
            .carousel-image-container { order: 1; }
            .carousel-text-container { order: 2; text-align: center; padding-top: 1.5rem; }
            .carousel-image-container img { max-height: 50vh; }
            .carousel-text-container h2 { font-size: 2rem; margin-top: 0; }
            .carousel-text-container h3 { font-size: 1.1rem; margin-bottom: 1.5rem; }
            .carousel-description { text-align: left; }
            .carousel-controls { justify-content: center; margin-top: 1.5rem; }
        }
    </style>
</head>
<body>
    <div class="overlay"></div>
    <header class="mobile-header">
        <h2 class="mobile-header-title">Quantum Minds</h2>
        <button id="mobile-menu-btn" class="mobile-menu-button">
            <svg fill="currentColor" viewBox="0 0 24 24"><path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"></path></svg>
        </button>
    </header>
    
    <section id="login-section">
        <div class="left-panel">
            <div class="static-formation">
                <canvas id="login-web-canvas"></canvas>
            </div>
        </div>
        <div class="right-panel">
            <div class="login-box">
                <img src="https://victorpaulovichbueno-gif.github.io/logo-quantum/logo" alt="Quantum Minds Shield" class="login-shield-logo">
                <img src="https://victorpaulovichbueno-gif.github.io/logo-quantum-nome/logo" alt="Quantum Minds Logo" class="login-title-logo">
                <form id="login-form">
                    <div class="input-group"><label for="email">USUÁRIO</label><input type="text" id="email" value="v"></div>
                    <div class="input-group"><label for="password">SENHA</label><input type="password" id="password" value="1"></div>
                    <button type="submit" class="btn-login">ENTRAR</button>
                </form>
            </div>
        </div>
    </section>

    <div id="app-shell">
        <aside class="app-sidebar">
            <div class="app-sidebar-header">
                <img src="https://victorpaulovichbueno-gif.github.io/logo-quantum/logo" alt="Quantum Minds Shield" class="sidebar-shield-logo">
                <img src="https://victorpaulovichbueno-gif.github.io/logo-quantum-nome/logo" alt="Quantum Minds Logo" class="sidebar-title-logo">
            </div>
            <nav class="app-nav">
                <a href="#" class="app-nav-link" data-target="agents-info-section">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M15 21a6 6 0 00-9-5.197M15 21V5a2 2 0 00-2-2H9a2 2 0 00-2 2v16"></path></svg>
                    <span>Nossos Agentes</span>
                </a>
                <a href="#" class="app-nav-link" data-target="chat-platform-section">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path></svg>
                    <span>Chats</span>
                </a>
            </nav>
             <div class="app-sidebar-footer">
                <a href="#" id="logout-btn" class="app-nav-link">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path></svg>
                    <span>Sair</span>
                </a>
            </div>
        </aside>
        <main class="app-main-content">
            <section id="agents-info-section">
                <div class="carousel-header">
                    <h1>Conheça Nossos Agentes</h1>
                    <p>Especialistas prontos para impulsionar seus resultados.</p>
                </div>
                <div class="carousel-content">
                    <div class="carousel-image-container">
                        <img id="carousel-main-img" src="" alt="Agente Principal">
                    </div>
                    <div class="carousel-text-container">
                        <h2 id="carousel-agent-name"></h2>
                        <h3 id="carousel-agent-title"></h3>
                        <div id="carousel-agent-description" class="carousel-description"></div>
                        <div class="carousel-controls">
                            <button class="carousel-arrow" id="carousel-prev-btn">←</button>
                            <span id="carousel-counter" class="carousel-counter"></span>
                            <button class="carousel-arrow" id="carousel-next-btn">→</button>
                        </div>
                    </div>
                </div>
            </section>

            <section id="chat-platform-section">
                <div class="chat-agent-web-container">
                    <div class="chat-static-formation">
                        <img src="https://victorpaulovichbueno-gif.github.io/logo-quantum-ambas/logo" alt="Logo Conselho Quantum" class="chat-web-logo">
                        <canvas id="chat-web-canvas"></canvas>
                    </div>
                </div>

                <div class="chat-conversation-container">
                    <div class="chat-area-panel">
                        <div class="chat-area-header" id="chat-area-header-web">
                            <button id="back-to-web-btn" class="back-button-web">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>
                                <span>Voltar</span>
                            </button>
                            <span id="chat-header-title-web"></span>
                        </div>
                        <div class="chat-history" id="chat-history-web"></div>
                        <form class="chat-input-area" id="chat-form-web">
                            <input type="text" id="chat-input-web" placeholder="Digite sua mensagem..." autocomplete="off">
                            <button type="submit" id="send-button-web"><svg width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M3.49997 20.5001V13.5001L10.5 12.0001L3.49997 10.5001V3.50006L20.5 12.0001L3.49997 20.5001Z" fill="white"/></svg></button>
                        </form>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script>
        // =======================================================
        // == DADOS E BANCO DE DADOS SIMULADO                   ==
        // =======================================================
        const agents = {
            'allex': { name: 'Allex', title: 'CEO MasterMind', img: 'https://victorpaulovichbueno-gif.github.io/agente-1/unnamed.png', description: `<p><strong>Área de Experiência:</strong> Estratégia de negócios, liderança, desenvolvimento de produtos e visão de mercado. Allex é o ponto central para decisões de alto nível e direção da empresa.</p><p><strong>Exemplos de uso:</strong> Peça para ele analisar um novo plano de negócios, dar feedback sobre a estratégia de expansão ou ajudar a definir metas trimestrais para a empresa.</p>` },
                        'rafaela': { name: 'Rafaela', title: 'Marketing', img: 'https://victorpaulovichbueno-gif.github.io/agente-2/unnamed.png', description: `<p><strong>Área de Experiência:</strong> Branding, campanhas digitais, análise de mercado e comunicação. Rafaela é especialista em posicionar a marca e atrair o público certo.</p><p><strong>Exemplos de uso:</strong> Solicite a criação de uma campanha para um novo produto, peça uma análise dos concorrentes ou ideias para aumentar o engajamento nas redes sociais.</p>` },
            'eduardo': { name: 'Eduardo', title: 'Financeiro', img: 'https://victorpaulovichbueno-gif.github.io/agente-3/unnamed.png', description: `<p><strong>Área de Experiência:</strong> Análise de DRE, fluxo de caixa, projeções financeiras e otimização de custos. Eduardo garante a saúde financeira e a sustentabilidade do negócio.</p><p><strong>Exemplos de uso:</strong> Peça uma análise de viabilidade para um novo investimento, ajuda para criar o orçamento anual ou dicas para otimizar o fluxo de caixa.</p>` },
            'andre': { name: 'André', title: 'Comercial', img: 'https://victorpaulovichbueno-gif.github.io/agente-4/unnamed.png', description: `<p><strong>Área de Experiência:</strong> Prospecção, negociação, funis de venda e gestão de relacionamento com o cliente (CRM  ). André é focado em converter leads em resultados.</p><p><strong>Exemplos de uso:</strong> Peça ajuda para estruturar uma proposta comercial, simular uma negociação difícil ou obter insights sobre como melhorar sua taxa de conversão.</p>` },
            'carolina': { name: 'Carolina', title: 'R.H.', img: 'https://victorpaulovichbueno-gif.github.io/agente-5/unnamed.png', description: `<p><strong>Área de Experiência:</strong> Recrutamento e seleção, cultura organizacional, desenvolvimento de talentos e gestão de desempenho. Carolina cuida do ativo mais importante: as pessoas.</p><p><strong>Exemplos de uso:</strong> Peça ajuda para criar a descrição de uma nova vaga, ideias para melhorar o clima organizacional ou um plano de desenvolvimento para um colaborador.</p>` },
            'beatriz': { name: 'Beatriz', title: 'C.S.', img: 'https://victorpaulovichbueno-gif.github.io/agente-6/unnamed.png', description: `<p><strong>Área de Experiência:</strong> Sucesso do cliente (Customer Success  ), onboarding, retenção e análise de feedback. Beatriz garante que os clientes obtenham o máximo valor do seu produto.</p><p><strong>Exemplos de uso:</strong> Solicite um roteiro para uma chamada de onboarding, peça para analisar as causas de churn ou crie uma pesquisa de satisfação do cliente (NPS).</p>` },
            'leo': { name: 'Leo', title: 'Tecnologia', img: 'https://victorpaulovichbueno-gif.github.io/agente-7/unnamed.png', description: `<p><strong>Área de Experiência:</strong> Arquitetura de software, desenvolvimento, infraestrutura e inovação tecnológica. Leo resolve os desafios técnicos mais complexos.</p><p><strong>Exemplos de uso:</strong> Consulte-o para decidir a melhor stack de tecnologia para um novo projeto, peça para ele revisar um código ou planejar a arquitetura de um novo sistema.</p>` },
            'drgustavo': { name: 'Dr. Gustavo', title: 'Jurídico', img: 'https://victorpaulovichbueno-gif.github.io/agente-8/unnamaed.png', description: `<p><strong>Área de Experiência:</strong> Direito empresarial, contratos, propriedade intelectual e conformidade (compliance  ). Dr. Gustavo protege a empresa de riscos legais.</p><p><strong>Exemplos de uso:</strong> Peça para ele revisar um contrato de serviço, tirar dúvidas sobre o registro de uma marca ou verificar se a empresa está em conformidade com a LGPD.</p>` }
        };
        const agentIds = Object.keys(agents);
        let currentCarouselIndex = 0;
        const chatHistories = {
            'allex': [{ role: 'assistant', content: 'Allex aqui. Como posso ajudar a expandir sua visão hoje?' }],
            'rafaela': [{ role: 'assistant', content: 'Olá! Sou a Rafaela. Vamos criar uma campanha de marketing de impacto?' }],
            'eduardo': [{ role: 'assistant', content: 'Eduardo. Vamos analisar os números e otimizar seus investimentos.' }],
            'andre': [{ role: 'assistant', content: 'André falando. Pronto para batermos algumas metas de vendas?' }],
            'carolina': [{ role: 'assistant', content: 'Carolina, R.H. Como posso ajudar a gerir seu time?' }],
            'beatriz': [{ role: 'assistant', content: 'Beatriz, C.S. Qual problema do seu cliente vamos solucionar?' }],
            'leo': [{ role: 'assistant', content: 'Leo. Qual desafio tecnológico vamos resolver hoje?' }],
            'drgustavo': [{ role: 'assistant', content: 'Dr. Gustavo a postos. Precisa de alguma consultoria jurídica?' }]
        };
        let activeChatAgentId = 'allex';

        // =======================================================
        // == SELEÇÃO DOS ELEMENTOS DO DOM (HTML)             ==
        // =======================================================
        const loginSection = document.getElementById('login-section');
        const appShell = document.getElementById('app-shell');
        const loginForm = document.getElementById('login-form');
        const emailInput = document.getElementById('email');
        const passwordInput = document.getElementById('password');
        const navLinks = document.querySelectorAll('.app-nav-link');
        const contentSections = document.querySelectorAll('.app-main-content > section');
        const mobileMenuBtn = document.getElementById('mobile-menu-btn');
        const sidebar = document.querySelector('.app-sidebar');
        const overlay = document.querySelector('.overlay');
        const carouselMainImg = document.getElementById('carousel-main-img');
        const carouselAgentName = document.getElementById('carousel-agent-name');
        const carouselAgentTitle = document.getElementById('carousel-agent-title');
        const carouselAgentDescription = document.getElementById('carousel-agent-description');
        const carouselCounter = document.getElementById('carousel-counter');
        const carouselPrevBtn = document.getElementById('carousel-prev-btn');
        const carouselNextBtn = document.getElementById('carousel-next-btn');
        const chatWebContainer = document.querySelector('.chat-agent-web-container');
        const chatConversationContainer = document.querySelector('.chat-conversation-container');
        const chatFormation = document.querySelector('.chat-static-formation');
        const backToWebBtn = document.getElementById('back-to-web-btn');
        const chatHeaderTitleWeb = document.getElementById('chat-header-title-web');
        const chatHistoryWeb = document.getElementById('chat-history-web');
        const chatFormWeb = document.getElementById('chat-form-web');
        const chatInputWeb = document.getElementById('chat-input-web');
        const logoutBtn = document.getElementById('logout-btn');
        const loginFormation = document.querySelector('#login-section .static-formation');

        // =======================================================
        // == LÓGICA DE NAVEGAÇÃO E RENDERIZAÇÃO INICIAL       ==
        // =======================================================
        
        document.addEventListener('DOMContentLoaded', () => {
            renderAgentFormation(loginFormation);
            setTimeout(drawLoginWebLines, 100);
        });

        loginForm.addEventListener('submit', function(event) {
            event.preventDefault();
            if (emailInput.value === 'v' && passwordInput.value === '1') {
                loginSection.style.display = 'none';
                appShell.style.display = 'flex';
                if (window.innerWidth <= 768) {
                    mobileMenuBtn.style.display = 'block';
                }
                showSection('agents-info-section');
            } else {
                alert('Usuário ou senha incorretos!');
            }
        });

        navLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const targetId = link.dataset.target;
                showSection(targetId);
            });
        });

        function showSection(targetId) {
            contentSections.forEach(section => {
                section.style.display = 'none';
            });
            
            const targetSection = document.getElementById(targetId);
            if (targetSection) {
                targetSection.style.display = 'flex';
            }

            navLinks.forEach(link => {
                link.classList.toggle('active', link.dataset.target === targetId);
            });

            if (targetId === 'agents-info-section') {
                renderCarousel();
            } else if (targetId === 'chat-platform-section') {
                renderChatWeb();
                showWeb();
            }
        }

        // =======================================================
        // == FUNÇÕES DAS SEÇÕES                              ==
        // =======================================================

        function renderAgentFormation(container) {
            container.innerHTML = '';
            const positions = { 'allex': '', 'rafaela': 'transform: rotate(0deg) translateY(-250px) rotate(0deg);', 'eduardo': 'transform: rotate(51.4deg) translateY(-250px) rotate(-51.4deg);', 'andre': 'transform: rotate(102.8deg) translateY(-250px) rotate(-102.8deg);', 'carolina': 'transform: rotate(154.2deg) translateY(-250px) rotate(-154.2deg);', 'beatriz': 'transform: rotate(205.6deg) translateY(-250px) rotate(-205.6deg);', 'leo': 'transform: rotate(257deg) translateY(-250px) rotate(-257deg);', 'drgustavo': 'transform: rotate(308.4deg) translateY(-250px) rotate(-308.4deg);' };
            
            agentIds.forEach(agentId => {
                const agent = agents[agentId];
                const agentDiv = document.createElement('div');
                agentDiv.classList.add('agent-container');
                agentDiv.dataset.agentId = agentId;
                if (agentId === 'allex') agentDiv.classList.add('central-agent');
                agentDiv.style.cssText = positions[agentId];
                agentDiv.innerHTML = `<img src="${agent.img}" alt="${agent.name}" class="agent-avatar"><div class="agent-info"><p class="agent-name">${agent.name}</p><p class="agent-title">${agent.title}</p></div>`;
                container.appendChild(agentDiv);
            });
        }

        function renderCarousel() {
            const mainAgent = agents[agentIds[currentCarouselIndex]];
            carouselMainImg.src = mainAgent.img;
            carouselAgentName.textContent = mainAgent.name;
            carouselAgentTitle.textContent = mainAgent.title;
            carouselAgentDescription.innerHTML = mainAgent.description;
            carouselCounter.textContent = `${currentCarouselIndex + 1}/${agentIds.length}`;
        }

        carouselNextBtn.addEventListener('click', () => {
            currentCarouselIndex = (currentCarouselIndex + 1) % agentIds.length;
            renderCarousel();
        });

        carouselPrevBtn.addEventListener('click', () => {
            currentCarouselIndex = (currentCarouselIndex - 1 + agentIds.length) % agentIds.length;
            renderCarousel();
        });

        // =======================================================
        // == LÓGICA DO NOVO CHAT EM TEIA                     ==
        // =======================================================

        function renderChatWeb() {
            renderAgentFormation(chatFormation);
            const agentDivs = chatFormation.querySelectorAll('.agent-container');
            agentDivs.forEach(div => {
                div.addEventListener('click', () => {
                    activeChatAgentId = div.dataset.agentId;
                    showConversation();
                });
            });
            setTimeout(drawChatWebLines, 100);
        }

        function showConversation() {
            chatWebContainer.style.display = 'none';
            chatConversationContainer.style.display = 'block';
            renderActiveChatWeb();
        }

        function showWeb() {
            chatConversationContainer.style.display = 'none';
            chatWebContainer.style.display = 'flex';
        }

        function renderActiveChatWeb() {
            const agent = agents[activeChatAgentId];
            const history = chatHistories[activeChatAgentId];
            chatHeaderTitleWeb.textContent = `Conversa com ${agent.name}`;
            chatHistoryWeb.innerHTML = '';
            history.forEach(message => addMessageToDom(message.content, message.role, agent.img, chatHistoryWeb));
            chatHistoryWeb.scrollTop = chatHistoryWeb.scrollHeight;
        }

        function addMessageToDom(text, role, agentImg, container) {
            const messageGroup = document.createElement('div');
            const senderClass = (role === 'user') ? 'user' : 'agent';
            messageGroup.classList.add('message-group', senderClass);
            
            if (senderClass === 'agent') {
                messageGroup.innerHTML = `<img src="${agentImg}" class="message-avatar"><div class="message-content"><div class="message-bubble">${text}</div></div>`;
            } else {
                messageGroup.innerHTML = `<div class="message-content"><div class="message-bubble">${text}</div></div>`;
            }
            container.appendChild(messageGroup);
            container.scrollTop = container.scrollHeight;
        }

        function addTypingIndicator(container) {
            const typingIndicator = document.createElement('div');
            typingIndicator.classList.add('message-group', 'agent', 'typing-indicator');
            typingIndicator.innerHTML = `<img src="${agents[activeChatAgentId].img}" class="message-avatar"><div class="message-content"><div class="message-bubble"><span></span><span></span><span></span></div></div>`;
            container.appendChild(typingIndicator);
            container.scrollTop = container.scrollHeight;
            return typingIndicator;
        }

        async function getOpenAIResponse(agentId, history) {
            const typingIndicator = addTypingIndicator(chatHistoryWeb);
            try {
                const response = await fetch('http://127.0.0.1:5001/ask', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ agent_id: agentId, history: history } )
                });
                typingIndicator.remove();
                if (!response.ok) {
                    throw new Error('Erro na resposta da rede');
                }
                const data = await response.json();
                return data.response;
            } catch (error) {
                typingIndicator.remove();
                console.error("Erro ao buscar resposta da API:", error);
                return "Erro: Não foi possível conectar ao servidor.";
            }
        }

        chatFormWeb.addEventListener('submit', async function(event) {
            event.preventDefault();
            const userMessageText = chatInputWeb.value.trim();
            if (userMessageText === '') return;

            const userMessage = { role: 'user', content: userMessageText };
            chatHistories[activeChatAgentId].push(userMessage);
            addMessageToDom(userMessageText, 'user', null, chatHistoryWeb);
            chatInputWeb.value = '';

            const aiResponseText = await getOpenAIResponse(activeChatAgentId, chatHistories[activeChatAgentId]);
            
            const aiMessage = { role: 'assistant', content: aiResponseText };
            chatHistories[activeChatAgentId].push(aiMessage);
            addMessageToDom(aiResponseText, 'assistant', agents[activeChatAgentId].img, chatHistoryWeb);
        });

        backToWebBtn.addEventListener('click', showWeb);

        // =======================================================
        // == FUNÇÕES DE DESENHO DA TEIA                      ==
        // =======================================================

        function drawLines(canvasId, formationSelector, logoSelector) {
            const canvas = document.getElementById(canvasId);
            if (!canvas) return;
            const ctx = canvas.getContext('2d');
            const container = document.querySelector(formationSelector);
            const dpr = window.devicePixelRatio || 1;
            const rect = container.getBoundingClientRect();

            if (rect.width === 0 || rect.height === 0) return;

            canvas.width = rect.width * dpr;
            canvas.height = rect.height * dpr;
            ctx.scale(dpr, dpr);
            ctx.strokeStyle = 'var(--gold-primary)';
            ctx.lineWidth = 1;
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            function getCenter(element) {
                if (!element) return null;
                const x = element.offsetLeft + element.offsetWidth / 2;
                const y = element.offsetTop + element.offsetHeight / 2;
                return { x, y };
            }

            function connect(pos1, pos2) {
                if (pos1 && pos2) {
                    ctx.beginPath();
                    ctx.moveTo(pos1.x, pos1.y);
                    ctx.lineTo(pos2.x, pos2.y);
                    ctx.stroke();
                }
            }

            const logoEl = document.querySelector(logoSelector);
            const logoPos = getCenter(logoEl);
            
            const agentPositions = {};
            agentIds.forEach(id => {
                agentPositions[id] = getCenter(container.querySelector(`[data-agent-id="${id}"]`));
            });

            if (logoSelector) {
                connect(logoPos, agentPositions.rafaela);
                connect(logoPos, agentPositions.eduardo);
                connect(logoPos, agentPositions.andre);
            }

            connect(agentPositions.rafaela, agentPositions.allex);
            connect(agentPositions.eduardo, agentPositions.allex);
            connect(agentPositions.andre, agentPositions.allex);
            connect(agentPositions.rafaela, agentPositions.carolina);
            connect(agentPositions.andre, agentPositions.leo);
            connect(agentPositions.carolina, agentPositions.drgustavo);
            connect(agentPositions.beatriz, agentPositions.allex);
            connect(agentPositions.leo, agentPositions.allex);
            connect(agentPositions.drgustavo, agentPositions.allex);
            connect(agentPositions.beatriz, agentPositions.drgustavo);
        }

        function drawLoginWebLines() { drawLines('login-web-canvas', '#login-section .static-formation', null); }
        function drawChatWebLines() { drawLines('chat-web-canvas', '#chat-platform-section .chat-static-formation', '.chat-web-logo'); }

        // =======================================================
        // == LÓGICA DO MENU MOBILE E LOGOUT                  ==
        // =======================================================

        function toggleMobileMenu() {
            sidebar.classList.toggle('mobile-visible');
            overlay.classList.toggle('visible');
        }

        mobileMenuBtn.addEventListener('click', toggleMobileMenu);
        overlay.addEventListener('click', toggleMobileMenu);

        sidebar.addEventListener('click', function(event) {
            if (event.target.closest('.app-nav-link')) {
                if (sidebar.classList.contains('mobile-visible')) {
                    toggleMobileMenu();
                }
            }
        });

        logoutBtn.addEventListener('click', function(event) {
            event.preventDefault(); 
            appShell.style.display = 'none';
            loginSection.style.display = 'flex';
            if (window.innerWidth <= 768) {
                mobileMenuBtn.style.display = 'none';
            }
        });

    </script>
</body>
</html>
